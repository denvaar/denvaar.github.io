<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>C Preprocessor for Array Values | denvaar's Site</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" disabled="disabled" title="dark" href="../css/tomorrow-night.min.css" />
    <link rel="stylesheet" disabled="disabled" title="light" href="../css/google-light.min.css" />
    <link type="image/x-icon" rel="icon" href="../favicon.ico">
  </head>
  <body>
    <header>
      <div class="p1 md:pv1 bg-banner banner-border-bottom">
        <div class="mh-auto max-w700 inline md:flex">
          <p class="mv0 bold align-self-end">
            <span class="site-name">denvaar's&nbsp;&nbsp;<span style="text-shadow: #3fd1a1 -2px -2px 5px, #0058ff 1px 1px 8px, #cf42d3 3px 2px 6px;;">w e b s i t e</span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
            <a href="../index.html" class="phantom-a">writing</a>&nbsp;&nbsp;•&nbsp;&nbsp;
            <a href="../trash.html" class="phantom-a">brain dump</a>&nbsp;&nbsp;•&nbsp;&nbsp;
            <a href="../playground.html" class="phantom-a">playground</a>&nbsp;&nbsp;•&nbsp;&nbsp;
            <a href="../rss.xml" class="phantom-a">rss</a>
          </p> 
        </div>
      </div>
    </header>
    <div class="p1 pt2 mh-auto max-w700 text-size-body min-h-vh70">
      <section>
        <h1 class="m0 heading-size-sm md:heading-size-md">C Preprocessor for Array Values</h1>
        <p class="m0 mt1 heading-size-xsm">Macros don't need to conform to C syntax.</p>
        <div>
          <p class="m0 mt1 heading-size-xxsm">keywords</p>
          
          

          
            <span class="tag gray-tag">c</span>
          
        </div>
        <p class="m0 mt1 heading-size-xxsm">2023-10-21</p>
        <hr class="divider" />
      </section>
      <p>
A good way to think of, <code class="inline">#define</code>, and other pre-processor directives, is basically as a “find and replace” operation that happens before the code is compiled. You don’t follow C syntax as in the rest of the program body.</p>
<pre><code class="c">#define VALUE 42
static const unsigned int array[1] = { VALUE };</code></pre>
<p>
It’s easy to see that the value of <code class="inline">VALUE</code> can be used in the creation of an array. And <code class="inline">#define</code> can be used to create function-like macros too:</p>
<pre><code class="c">#define PLUS_ONE(n) n+1
static const unsigned int array[1] = { PLUS_ONE(41) };</code></pre>
<p>
The previous two code snippets would ultimately result in the same executable. Just to drive home the idea that this is basically a “find and replace” happening, the following two snippets are also equal (in terms of the end result).</p>
<pre><code class="c">#define A 1
#define B 2
static const unsigned int array[2] = { A, B };</code></pre>
<pre><code class="c">#define AB 1, 2
static const unsigned int array[2] = { AB };</code></pre>
<p>
Invoke the C Preprocessor using, <code class="inline">cpp &lt;filename&gt;</code>, to see the substitutions it made. Both snippets result in the same thing.</p>
<pre><code># 1 &quot;macro_demo.c&quot;
# 1 &quot;&lt;built-in&gt;&quot; 1
# 1 &quot;&lt;built-in&gt;&quot; 3
# 369 &quot;&lt;built-in&gt;&quot; 3
# 1 &quot;&lt;command line&gt;&quot; 1
# 1 &quot;&lt;built-in&gt;&quot; 2
# 1 &quot;macro_demo.c&quot; 2


static const unsigned int array[2] = { 1, 2 };

int main(void) {
  return 0;
}</code></pre>

    </div>
    <footer>
      <div class="p1 pv2 bg-banner muted-text banner-border-top">
        <div class="mh-auto max-w700">
            <img src="https://avatars.githubusercontent.com/u/10538978" class="profile-img" alt="A picture of me" decoding="async" />
          <div class="md:mt2">
            <p><a href="https://github.com/denvaar">GitHub</a> · <a href="https://www.youtube.com/channel/UCDY981jZta5C5A6kQXioGUg">YouTube</a> · <a href="https://www.linkedin.com/in/denver-smith-a41997103">LinkedIn</a> · <a href="../rss.xml">RSS</a> · <a href="https://buymeacoffee.com/denvaar">Buy Me Coffee</a></p>
          </div>
          <p class="">© 2015 - 2024 Denver Smith</p>
        </div>
      </div>
    </footer>
    <script src="../js/highlight.min.js"></script>
    <script>
      function enableHighlightFor(mode) {
        const oppositeMode = mode === "dark" ? "light" : "dark";

        document
          .querySelector(`link[title="${mode}"]`)
          .removeAttribute("disabled");
        document
          .querySelector(`link[title="${oppositeMode}"]`)
          .setAttribute("disabled", "disabled");

        document.querySelectorAll("pre code.hljs")
          .forEach(function(el) {
            const bgColor = window.getComputedStyle(el).getPropertyValue("background");
            console.log({el, bgColor});

            el.closest("pre").style.background = bgColor;
          });
      }

      window.addEventListener('DOMContentLoaded', function() {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          // dark mode
          enableHighlightFor("dark");
        } else {
          //light mode
          enableHighlightFor("light");
        }

        hljs.highlightAll();
      });

      window.matchMedia('(prefers-color-scheme: dark)')
            .addEventListener('change', event => {
        if (event.matches) {
          //dark mode
          enableHighlightFor("dark");
        } else {
          //light mode
          enableHighlightFor("light");
        }
      })

    </script>
  </body>
</html>
